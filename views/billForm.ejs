<!-- billForm.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bill Generate | BAJARANG STEEL CORPORATION TAX INVOICE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div  class="text-center mb-3">
        <h2>BAJARANG STEEL CORPORATION </h2>
        <span>OPP, KARUNESH VILLA, SWAMINARAYAN MISION ROAD, KAMREJ, SURAT-395006, GUJARAT</span></br>
        <span>Phone: 9909819212 &nbsp; &nbsp; Email: bhayanipiyush33@gmail.com </span></br>
    </div>
    <form action="/generateBill" method="post">
        <div class="row">

        <div class="mb-3 col-6">
            <label for="billNo" class="form-label">Bill No</label>
            <input type="text" class="form-control" id="billNo" name="billNo">
        </div>
        <div class="mb-3 col-6">
            <label for="date" class="form-label">Date</label>
            <input type="date" class="form-control" id="date" name="bill_date" value="<%= new Date().toISOString().split('T')[0] %>">
        </div>
        </div>
<div class="row">
        <div class="mb-3 col-6">
            <label for="orderNo" class="form-label">Order No.</label>
            <input type="text" class="form-control" id="orderNo" name="orderNo">
        </div>
        <div class="mb-3 col-6">
            <label for="challanNo" class="form-label">Challan No.</label>
            <input type="text" class="form-control" id="challanNo" name="challanNo">
        </div>
</div>
<!--        heading of consign details -->
        <h5>Consignee Details</h5>
        <div>
        <div class="mb-3">
            <label for="billNo" class="form-label">consignee Name</label>
            <input type="text" class="form-control" id="consigneeName" name="consigneeName">
        </div>
        <div class="mb-3">
            <label for="consigneeName" class="form-label">Name & Address of Consignee</label>
            <textarea class="form-control" id="consigneeAddress" name="consigneeAddress" rows="3"></textarea>
        </div>
        <div class="row">
        <div class="mb-3 col-6">
            <label for="state" class="form-label">State</label>
            <input type="text" class="form-control" id="state" name="consigneeState" value="GUJARAT">
        </div>
<div class="mb-3 col-6">
            <label for="stateCode" class="form-label">State Code</label>
            <input type="text" class="form-control" id="stateCode" name="consigneeStateCode" value="24">
</div>
        </div>
        <div class="row">
        <div class="mb-3 col-6">
            <label for="gstNo" class="form-label">GST No.</label>
            <input type="text" class="form-control" id="gstNo" name="consigneeGstNo" pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[0-9]{1}[A-Z]{2}" title="Format: 24FEZPB4648D1ZA">
        </div>
        <div class="mb-3 col-6">
            <label for="panNo" class="form-label">pancard No.</label>
            <input type="text" class="form-control" id="panNo" name="consigneePanNo" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" title="Format: FEZPB4648D">
        </div>
        </div>
        </div>
<!--        heading of delivery details -->
        <h5>Delivery Details</h5>
<!--        checkbox for filled detail same as consignee -->
        <input type="checkbox" id="sameAsConsignee" name="sameAsConsignee">
        <label for="sameAsConsignee">Same as Consignee</label>
        <div>
            <div class="mb-3">
                <label for="deliveryName" class="form-label">Delivery Name</label>
                <input type="text" class="form-control" id="deliveryName" name="deliveryName">
            </div>
            <div class="mb-3">
                <label for="deliveryAddress" class="form-label">Address of Delivery</label>
                <textarea class="form-control" id="deliveryAddress" name="deliveryAddress" rows="3"></textarea>
            </div>
            <div class="row">
                <div class="mb-3 col-6">
                    <label for="deliveryState" class="form-label">State</label>
                    <input type="text" class="form-control" id="deliveryState" name="deliveryState" value="GUJRAT">
                </div>
                <div class="mb-3 col-6">
                    <label for="deliveryStateCode" class="form-label">State Code</label>
                    <input type="text" class="form-control" id="deliveryStateCode" name="deliveryStateCode" value="24">
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-6">
                    <label for="deliveryGstNo" class="form-label">GST No.</label>
                    <input type="text" class="form-control" id="deliveryGstNo" name="deliveryGstNo" pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[0-9]{1}[A-Z]{2}" title="Format: 24FEZPB4648D1ZA">
                </div>
                <div class="mb-3 col-6">
                    <label for="deliveryPanNo" class="form-label">pancard No.</label>
                    <input type="text" class="form-control" id="deliveryPanNo" name="deliveryPanNo" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" title="Format: FEZPB4648D">
                </div>
            </div>
        </div>

<!--        heading of invoice details -->
        <h5>Invoice Details</h5>
        <div class="row">
        <div class="mb-3 col-6">
            <label for="lrNo" class="form-label">LR No.</label>
            <input type="text" class="form-control" id="lrNo" name="lrNo">
        </div>
        <div class="mb-3 col-6">
            <label for="lrDate" class="form-label">LR Date</label>
            <input type="date" class="form-control" id="lrDate" name="lrDate">
        </div>
        </div>
        <div class="mb-3">
            <label for="transport" class="form-label">Transport</label>
            <input type="text" class="form-control" id="transport" name="transport">
        </div>
        <div class="mb-3">
            <label for="vehicle" class="form-label">Vehicle</label>
            <input type="text" class="form-control" id="vehicle" name="vehicle" pattern="[A-Za-z]{2}-[0-9]{2}-[A-Za-z]{2}-[0-9]{4}" title="Please enter a valid vehicle number (e.g., GJ-05-RG-1360)" value="GJ-05-BT-2494">
        </div>
        <div class="mb-3">
            <label for="ewayBillNo" class="form-label">E-way Bill No</label>
            <input type="text" class="form-control" id="ewayBillNo" name="ewayBillNo">
        </div>
        <div class="mb-3">
            <label for="broker" class="form-label">Broker</label>
            <input type="text" class="form-control" id="broker" name="broker">
        </div>
        <div class="mb-3">
            <label for="dueDate" class="form-label">Due Date</label>
            <input type="date" class="form-control" id="dueDate" name="dueDate" value="<%= (new Date(new Date().setFullYear(new Date().getFullYear() + 1))).toISOString().split('T')[0] %>">
        </div>

        <div class="mb-3">
            <label for="remarks" class="form-label">Remarks</label>
            <input type="text" class="form-control" id="remarks" name="remarks">
        </div>
        <div id="productSection">
            <!-- Product rows will be dynamically added here -->
        </div>
<!--        checkbox for SGST , CGST , IGST in single line-->
<div class="mb-3">
            <input type="checkbox" id="sgst" name="sgst"  checked>
            <label for="sgst">SGST</label>
            <input type="checkbox" id="cgst" name="cgst"  checked>
            <label for="cgst">CGST</label>
            <input type="checkbox" id="igst" name="igst">
            <label for="igst">IGST</label>
        </div>
        <div class="mb-3">
            <button type="button" class="btn btn-success" onclick="addProductRow()">Add Product</button>
        </div>


        <!-- Add more input fields for other details -->
        <button type="submit" class="btn btn-primary">Generate Bill</button>
    </form>
</div>

<script>
    addProductRow();
    function addProductRow() {
        const productSection = document.getElementById('productSection');

        const productRow = document.createElement('div');
        productRow.classList.add('row', 'mb-3');

        productRow.innerHTML = `
                <div class="col-2">
                    <input type="text" class="form-control" name="productName[]" placeholder="Product">
                </div>
                <div class="col-2">
                    <input type="text" class="form-control" name="hsnSac[]" placeholder="HSN/SAC" value="72149990">
                </div>
                <div class="col-2">
                    <input type="text" class="form-control" name="uom[]" placeholder="UOM" value="KGs">
                </div>
                <div class="col-2">
                    <input type="number"  step="0.01"  class="form-control" name="quantity[]" placeholder="Quantity">
                </div>
                <div class="col-2">
                    <input type="number" step="0.01" class="form-control" name="rate[]" placeholder="Rate">
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-danger" onclick="removeProductRow(this)">-</button>
                </div>
            `;

        productSection.appendChild(productRow);
    }

    function removeProductRow(button) {
        const productRow = button.closest('.row');
        productRow.remove();
    }
</script>
<script>
<!--    filled delivery data on checkbox change -->
    const sameAsConsignee = document.getElementById('sameAsConsignee');
    sameAsConsignee.addEventListener('change', function () {
        const consigneeName = document.getElementById('consigneeName').value;
        const consigneeAddress = document.getElementById('consigneeAddress').value;
        const consigneeState = document.getElementById('state').value;
        const consigneeStateCode = document.getElementById('stateCode').value;
        const consigneeGstNo = document.getElementById('gstNo').value;
        const consigneePanNo = document.getElementById('panNo').value;

        const deliveryName = document.getElementById('deliveryName');
        const deliveryAddress = document.getElementById('deliveryAddress');
        const deliveryState = document.getElementById('deliveryState');
        const deliveryStateCode = document.getElementById('deliveryStateCode');
        const deliveryGstNo = document.getElementById('deliveryGstNo');
        const deliveryPanNo = document.getElementById('deliveryPanNo');

        if (sameAsConsignee.checked) {
            deliveryName.value = consigneeName;
            deliveryAddress.value = consigneeAddress;
            deliveryState.value = consigneeState;
            deliveryStateCode.value = consigneeStateCode;
            deliveryGstNo.value = consigneeGstNo;
            deliveryPanNo.value = consigneePanNo;
        } else {
            deliveryName.value = '';
            deliveryAddress.value = '';
            deliveryState.value = '';
            deliveryStateCode.value = '';
            deliveryGstNo.value = '';
            deliveryPanNo.value = '';
        }
    });
</script>
</body>
</html>
